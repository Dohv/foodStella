<div class="row recipes-page">
  <div class="col-md-8 col-center">
  	<% if @recipes %>
  	  <ul>
  	  <% @recipes.each do |recipe| %>
  	   <li> <%= link_to image_tag(recipe.photo_url.url(:thumb)), {:action => 'show', :controller => 'recipes', :id => recipe.id} %>
  	   	<% unless current_user.owns?(recipe) %>
  	   	  <% if current_user.following?(recipe) %>
  	   		<span class="glyphicon glyphicon-remove" data="<%= recipe.id %>" id="unfollow"></span> 
  	   	  <% else %>
  	   		<span class="glyphicon glyphicon-plus" data="<%= recipe.id %>" id="follow"></span> 
  	   	  <% end %>
  	   	 <% end %>
  	   </li>
  	  <% end %>
  	</ul>
  	<% end %>
  </div>
</div>


<script>

	$(document).ready(function() {
		console.log("loaded");
    	$(document).on('click','#follow',function(){
    		$this = $(this)
    		recipe_id = $this.attr('data')
    		console.log(recipe_id)
    		$.ajax({//ajax call for questions
                  type:'POST',
                  data: {id: recipe_id},
                  url:'/relationships',
              
                  success:function (response) {
                  	$this.addClass("glyphicon-remove")
                    $this.attr('id', 'unfollow');
                    $this.removeClass("glyphicon-plus")
                  }
                  
                });//end ajax call
		});

		$(document).on('click','#unfollow',function(){
    		$this = $(this)
    		recipe_id = $this.attr('data')
    		console.log(recipe_id)
    		$.ajax({//ajax call for questions
                  type:'DELETE',
                  data: {id: recipe_id},
                  url:"/relationships/" + recipe_id,
              
                  success:function (response) {
                  	$this.addClass("glyphicon-plus")
                    $this.attr('id', 'follow');
                    $this.removeClass("glyphicon-remove")
                  }
                  
                });//end ajax call
		});
});
</script>