<div class="row recipe-selection-mobile">
  <div class="col-md-12 col-xs-12 col-sm-12">
    <div class="recipe-selection-header">
      <span class="close-x" id="hide-recipe-selection" aria-hidden="true"></span>
      <h3 id="meal-day" data="" data-one="" data-two="" data-three="" data-four="" data-five=""></h3>
      <h2>My Foods</h2>
      <div class="alert alert-success" id="meal-added-alert" role="alert">Recipe added to planner!</div>
      <div class="alert alert-danger" id="meal-removed-alert" role="alert">Recipe removed from planner.</div>
    </div>
  	<div class="meal-selection">
       <span id="snacks" class="mobile-selection-button">
          Snacks
          <span class="badge"><%= snacks.count %></span>
       </span>
      <div class="selection" id="snacks-selection" style="display: <%= expanded[0] %>">
          <div id='external-events'>
            <div id='external-events-listing'>
              <% snacks.each do |r| %>
                <div class='fc-event <%= r.get_friendly_name %>id-<%= r.id %> draggable' id="in-list" data="<%= r.get_friendly_name %>id-<%= r.id %>" data-one="<%= r.id %>" data-two="<%= r.servings %>" data-three="<%= r.name %>" data-event='1' style='background-image: url("<%= r.retrieve_pic %>")'><span class="recipe-title"><%= link_to truncate(r.name, length: 14), recipe_path(r) %></span></div>
              <% end %>
            </div>
          </div>
      </div>

      <span id="sidedish" class="mobile-selection-button">
          Side Dishes
          <span class="badge"><%= side_dishes.count %></span>
       </span>
      <div class="selection" id="sidedish-selection" style="display: <%= expanded[1] %>">
          <div id='external-events'>
            <div id='external-events-listing'>
              <% side_dishes.each do |r| %>
                <div class='fc-event <%= r.get_friendly_name %>id-<%= r.id %>' id="in-list" data="<%= r.get_friendly_name %>id-<%= r.id %>" data-one="<%= r.id %>" data-two="<%= r.servings %>" data-three="<%= r.name %>" style='background-image: url("<%= r.retrieve_pic %>")'><span class="recipe-title"><%= link_to truncate(r.name, length: 14), recipe_path(r) %></span></div>
              <% end %>
            </div>
          </div>
      </div>

      <span id="maindish" class="mobile-selection-button">
          Main Dishes
          <span class="badge"><%= main_dishes.count %></span>
       </span>
      <div class="selection" id="maindish-selection" style="display: <%= expanded[2] %>">
          <div id='external-events'>
            <div id='external-events-listing'>
              <% main_dishes.each do |r| %>
                <div class='fc-event <%= r.get_friendly_name %>id-<%= r.id %>' id="in-list" data="<%= r.get_friendly_name %>id-<%= r.id %>" data-one="<%= r.id %>" data-two="<%= r.servings %>" data-three="<%= r.name %>"><span class="recipe-title"><%= truncate(r.name, length: 14) %></span></div>
              <% end %>
            </div>
          </div>
      </div>

      <span id="dessert" class="mobile-selection-button">
          Desserts
          <span class="badge"><%= desserts.count %></span>
       </span>
      <div class="selection" id="dessert-selection" style="display: <%= expanded[3] %>">
          <div id='external-events'>
            <div id='external-events-listing'>
              <% desserts.each do |r| %>
                <div class='fc-event <%= r.get_friendly_name %>id-<%= r.id %>' id="in-list" data="<%= r.get_friendly_name %>id-<%= r.id %>" data-one="<%= r.id %>" data-two="<%= r.servings %>" data-three="<%= r.name %>"><span class="recipe-title"><%= link_to truncate(r.name, length: 14), recipe_path(r) %></span></div>
              <% end %>
            </div>
          </div>
      </div>

      <span id="drink" class="mobile-selection-button">
          Drinks
          <span class="badge"><%= drinks.count %></span>
       </span>
      <div class="selection" id="drink-selection" style="display: <%= expanded[4] %>">
          <div id='external-events'>
            <div id='external-events-listing'>
              <% drinks.each do |r| %>
                <div class='fc-event <%= r.get_friendly_name %>id-<%= r.id %>' id="in-list" data="<%= r.get_friendly_name %>id-<%= r.id %>" data-one="<%= r.id %>" data-two="<%= r.servings %>" data-three="<%= r.name %>"><span class="recipe-title"><%= link_to truncate(r.name, length: 14), recipe_path(r) %></span></div>
              <% end %>
            </div>
          </div>
      </div>

    </div>
  </div>
</div>

<script>

$(document).ready(function(){

    $('#snacks').click(function() {
    if ( $('#snacks-selection').css('display') == 'none' )
      $('#snacks-selection').css('display','block');
    else
      $('#snacks-selection').css('display','none');
  });

  $('#sidedish').click(function() {
    if ( $('#sidedish-selection').css('display') == 'none' )
      $('#sidedish-selection').css('display','block');
    else
      $('#sidedish-selection').css('display','none');
  });

  $('#maindish').click(function() {
    if ( $('#maindish-selection').css('display') == 'none' )
      $('#maindish-selection').css('display','block');
    else
      $('#maindish-selection').css('display','none');
  });

  $('#dessert').click(function() {
    if ( $('#dessert-selection').css('display') == 'none' )
      $('#dessert-selection').css('display','block');
    else
      $('#dessert-selection').css('display','none');
  });

  $('#drink').click(function() {
    if ( $('#drink-selection').css('display') == 'none' )
      $('#drink-selection').css('display','block');
    else
      $('#drink-selection').css('display','none');
  });



  $('button').click(function() {

    // make selection scrollable
    // var matchingSelection = $('#' + $(this).attr('id') + '-selection');
    // if(matchingSelection.height() > $(window).height()*0.6)
    //     matchingSelection.addClass('scrollable');

    var contentHeight = $('.meal-selection').outerHeight() + 80;
    var sidebarHeight = $('.recipe-selection-mobile').outerHeight()

    if (contentHeight > sidebarHeight) {
      $('.sidebar').css({
        'height': contentHeight + 'px',
        'max-height': contentHeight + 'px'
      });
      $('#sidebar-col').css({
        'height': contentHeight + 'px',
        'max-height': contentHeight + 'px'
      });
      $('.sidebar-content').css({
        'min-height': contentHeight + 'px'
      });
      resetSidebar();
    }
    else {
      if(contentHeight < $(window).height()){
        $('.sidebar').css({
          'height': '100vh',
          'max-height': '100vh'
        });
        $('#sidebar-col').css({
          'height': '100vh',
          'max-height': '100vh'
        });
        $('.sidebar-content').css({
          'min-height': ''
        });
        resetSidebar();
      }
    }
  });



});


</script>